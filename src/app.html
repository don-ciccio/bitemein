<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="default" />
		<meta name="msapplication-tap-highlight" content="no" />
		
		<!-- Favicon and Icons -->
		<link rel="icon" href="%sveltekit.assets%/favicon.svg" type="image/svg+xml" />
		<link rel="icon" href="%sveltekit.assets%/favicon-32x32.svg" sizes="32x32" type="image/svg+xml" />
		<link rel="icon" href="%sveltekit.assets%/favicon-16x16.svg" sizes="16x16" type="image/svg+xml" />
		
		<!-- Apple Touch Icons for iOS -->
		<link rel="apple-touch-icon" href="%sveltekit.assets%/apple-touch-icon.svg" />
		<link rel="apple-touch-icon" sizes="180x180" href="%sveltekit.assets%/apple-touch-icon.svg" />
		
		<!-- Android Chrome Icons -->
		<link rel="icon" type="image/svg+xml" sizes="192x192" href="%sveltekit.assets%/favicon-192x192.svg" />
		<link rel="icon" type="image/svg+xml" sizes="512x512" href="%sveltekit.assets%/favicon-512x512.svg" />
		
		<!-- PWA Manifest -->
		<link rel="manifest" href="%sveltekit.assets%/manifest.json" />
		
		<!-- Mobile Web App Meta Tags -->
		<meta name="theme-color" content="#FB5E5D" />
		<meta name="msapplication-TileColor" content="#FB5E5D" />
		<meta name="msapplication-TileImage" content="%sveltekit.assets%/favicon-192x192.svg" />
		
		<!-- Chrome Mobile Specific -->
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="application-name" content="BiteMe In" />
		
		<!-- Preconnect to external domains for performance -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		
		<!-- DNS Prefetch for better performance -->
		<link rel="dns-prefetch" href="https://apps.shopify.com" />
		<link rel="dns-prefetch" href="https://docs.bitemein.com" />
		
		%sveltekit.head%
	</head>
	<body data-sveltekit-preload-data="hover">
		<div style="display: contents">%sveltekit.body%</div>
		
		<!-- Image Protection Script -->
		<script>
			// Image Protection JavaScript - Inline for immediate execution
			document.addEventListener('DOMContentLoaded', function() {
				// Disable right-click on images and SVGs
				document.addEventListener('contextmenu', function(e) {
					const target = e.target;
					if (target && target instanceof Element && 
						(target.tagName === 'IMG' || target.tagName === 'SVG' || target.closest('svg'))) {
						e.preventDefault();
						return false;
					}
				});

				// Disable drag and drop for images and SVGs
				document.addEventListener('dragstart', function(e) {
					const target = e.target;
					if (target && target instanceof Element && 
						(target.tagName === 'IMG' || target.tagName === 'SVG' || target.closest('svg'))) {
						e.preventDefault();
						return false;
					}
				});

				// Disable keyboard shortcuts for saving images
				document.addEventListener('keydown', function(e) {
					// Disable Ctrl+S, Ctrl+A, F12, Ctrl+Shift+I, Ctrl+U
					if (
						(e.ctrlKey && (e.key === 's' || e.key === 'a' || e.key === 'u')) ||
						e.key === 'F12' ||
						(e.ctrlKey && e.shiftKey && e.key === 'I')
					) {
						e.preventDefault();
						return false;
					}
				});

				// Apply protection to existing images
				function protectImages() {
					const images = document.querySelectorAll('img, svg');
					images.forEach(img => {
						if (img instanceof HTMLElement) {
							const style = img.style;
							style.setProperty('-webkit-user-select', 'none');
							style.setProperty('-moz-user-select', 'none');
							style.setProperty('-ms-user-select', 'none');
							style.userSelect = 'none';
							style.setProperty('-webkit-user-drag', 'none');
							style.setProperty('-webkit-touch-callout', 'none');
						}
					});
				}

				// Initial protection
				protectImages();

				// Monitor for dynamically added images
				const observer = new MutationObserver(function(mutations) {
					mutations.forEach(function(mutation) {
						mutation.addedNodes.forEach(function(node) {
							if (node.nodeType === 1 && node instanceof Element) {
								const newImages = node.querySelectorAll('img, svg');
								newImages.forEach(img => {
									if (img instanceof HTMLElement) {
										const style = img.style;
										style.setProperty('-webkit-user-select', 'none');
										style.setProperty('-moz-user-select', 'none');
										style.setProperty('-ms-user-select', 'none');
										style.userSelect = 'none';
										style.setProperty('-webkit-user-drag', 'none');
										style.setProperty('-webkit-touch-callout', 'none');
									}
								});
							}
						});
					});
				});

				observer.observe(document.body, {
					childList: true,
					subtree: true
				});
			});

			// Additional protection: Clear clipboard when copying
			document.addEventListener('copy', function(e) {
				const selection = window.getSelection();
				if (selection && selection.toString().length === 0 && e.clipboardData) {
					e.clipboardData.setData('text/plain', '');
					e.preventDefault();
				}
			});

			// Disable print screen (limited effectiveness)
			document.addEventListener('keyup', function(e) {
				if (e.key === 'PrintScreen') {
					if (navigator.clipboard) {
						navigator.clipboard.writeText('');
					}
					console.log('Screenshot attempt detected');
				}
			});
		</script>
	</body>
</html>
